/* this is generated by nino */
namespace Nino.Test
{
    public partial class CustomTypeTest
    {
        public static CustomTypeTest.SerializationHelper NinoSerializationHelper = new CustomTypeTest.SerializationHelper();
        public class SerializationHelper: Nino.Serialization.NinoWrapperBase<CustomTypeTest>
        {
            #region NINO_CODEGEN
            public override void Serialize(CustomTypeTest value, Nino.Serialization.Writer writer)
            {
                if(value == null)
                {
                    writer.Write(false);
                    return;
                }
                writer.Write(true);
                writer.WriteCommonVal<UnityEngine.Vector3>(value.v3);
                writer.Write(value.dt);
                writer.WriteCommonVal<System.Nullable<System.Int32>>(value.ni);
                if(value.qs != null)
                {
                    writer.Write(true);
                    writer.CompressAndWrite(value.qs.Count);
                    foreach (var entry in value.qs)
                    {
                        writer.WriteCommonVal<UnityEngine.Quaternion>(entry);
                    }
                }
                else
                {
                    writer.Write(false);
                }
                writer.WriteCommonVal<UnityEngine.Matrix4x4>(value.m);
                if(value.dict != null)
                {
                    writer.Write(true);
                    writer.CompressAndWrite(value.dict.Count);
                    foreach (var entry in value.dict)
                    {
                        writer.Write(entry.Key);
                        writer.CompressAndWrite(entry.Value);
                    }
                }
                else
                {
                    writer.Write(false);
                }
                if(value.dict2 != null)
                {
                    writer.Write(true);
                    writer.CompressAndWrite(value.dict2.Count);
                    foreach (var entry in value.dict2)
                    {
                        writer.Write(entry.Key);
                        Nino.Test.Data.NinoSerializationHelper.Serialize(entry.Value, writer);
                    }
                }
                else
                {
                    writer.Write(false);
                }
            }

            public override CustomTypeTest Deserialize(Nino.Serialization.Reader reader)
            {
                if(!reader.ReadBool())
                    return null;
                CustomTypeTest value = new CustomTypeTest();
                value.v3 = reader.ReadCommonVal<UnityEngine.Vector3>();
                value.dt = reader.ReadDateTime();
                value.ni = reader.ReadCommonVal<System.Nullable<System.Int32>>();
                if(reader.ReadBool()){value.qs = new System.Collections.Generic.List<UnityEngine.Quaternion>(reader.ReadLength());
                for(int i = 0, cnt = value.qs.Capacity; i < cnt; i++)
                {
                    var value_qs_i = reader.ReadCommonVal<UnityEngine.Quaternion>();
                    value.qs.Add(value_qs_i);
                }}
                value.m = reader.ReadCommonVal<UnityEngine.Matrix4x4>();
                if(reader.ReadBool()){                var value_dict_len = reader.ReadLength();
                value.dict = new System.Collections.Generic.Dictionary<System.String,System.Int32>(value_dict_len);
                for(int i = 0; i < value_dict_len; i++)
                {
                    var value_dict_key = reader.ReadString();
                    var value_dict_val = reader.DecompressAndReadNumber<System.Int32>();;
                    value.dict[value_dict_key] = value_dict_val;
                }}
                if(reader.ReadBool()){                var value_dict2_len = reader.ReadLength();
                value.dict2 = new System.Collections.Generic.Dictionary<System.String,Nino.Test.Data>(value_dict2_len);
                for(int i = 0; i < value_dict2_len; i++)
                {
                    var value_dict2_key = reader.ReadString();
                    var value_dict2_val = Nino.Test.Data.NinoSerializationHelper.Deserialize(reader);
                    value.dict2[value_dict2_key] = value_dict2_val;
                }}
                return value;
            }
            #endregion
        }
    }
}